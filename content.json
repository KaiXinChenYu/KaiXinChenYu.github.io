[{"title":"Unity3D数据读取--简单Txt格式读取","date":"2017-04-11T00:35:00.000Z","path":"2017/04/11/20170411-Unity3D-DataLoad/","text":"今天主要讲下我在使用Unity3D过程中，读取文件数据时一些浅显的经验，肯定有不少问题。 游戏开发过程中，如果是单机游戏，一般不包含数据库，这样导致稍微复杂的游戏将会包含大量的数据信息，包括物品，剧情，技能，人物信息等，这些数据得存储一般都会以一个外部文件进行存储，可以是Json，Xml，Excel，Txt等，这样方便管理游戏中大量的数据。这些数据将在运行游戏的时候进行读取。如果只是读取数据，那么Txt文本是不错的选择，因为Unity源生对txt支持较好，可以在组件上直接拖入。而要像数据库一样，对这些数据进行增删改查的话Json和Xml是更好的选择。 这次主要讲下读取txt文本。 数据读取步骤1.素材准备先准备一个txt文件，我这用了一个Excel文档（来源：金庸群侠传X Mod编辑器）转成txt，因为个人感觉用excel管理数据，清晰明了，如果能直接读取当然更好，但是unity本身对其的支持不是很好，虽然也可以通过插件读取，但是或多或少还有些问题。excel表先另存为转成逗号分隔符的csv格式，然后直接强制转成txt。附：excel文件地址 http://pan.baidu.com/s/1geZvqUJ 2.Unity中操作1.Hierarchy面板新建一个空的游戏物体，起名GameManager。2.Project面板新建四个文件夹备用，Scripts文件夹下，新建C#脚本InventoryInfoLoadManager和Inventory脚本，名称随意。3.将脚本挂载到GameManager上。 3.读取代码打开脚本Inventory，只读取一部分信息，编写如下代码： using System.Collections; using System.Collections.Generic; using UnityEngine; public class Inventory { //属性定义 private string name; private string des; private string talent; //封装 public string Name { get { return name; } set { name = value; } } public string Des { get { return des; } set { des = value; } } public string Talent { get { return talent; } set { talent = value; } } } 打开脚本InventoryInfoLoadManager脚本，编写如下代码： using System.Collections; using System.Collections.Generic; using UnityEngine; public class InventoryInfoLoadManager : MonoBehaviour { //单例模式 //public static InventoryInfoLoadManager _instance; //也可以用Resources.Load读取，我这就直接通过Inspector面板拖入 public TextAsset inventoryInfo; //List集合存储所有物品 public List&lt;Inventory&gt; list= new List&lt;Inventory&gt;(); //void Awake() //{ // _instance = this; //} //Start方法中读取物品信息 void Start() { ReadInfo(); foreach (Inventory inventory in list) { print(inventory.Name);//输出到控制台测试 } } //信息读取方法 void ReadInfo() { string allInfo = inventoryInfo.text; string[] lineInfoArray = allInfo.Split(&apos;\\n&apos;); foreach (string lineInfo in lineInfoArray) { string[] itemInfoArray = lineInfo.Split(&apos;,&apos;); if (itemInfoArray[0] == &quot;物品名&quot;) { } else { string name = itemInfoArray[0]; string des = itemInfoArray[1]; string talent = itemInfoArray[3]; Inventory it= new Inventory(); it.Name = name; it.Des = des; it.Talent = talent; list.Add(it); } } } } 写完代码把txt文件拖到脚本InventoryInfoLoadManager上，确保txt文本没有多余空格，且是utf-8格式，之后在控制台就能显示读取数据。到这就结束了，下面是我自己继续将信息显示到游戏物体之上，方法不好。 4.界面显示首先将InventoryInfoLoadManager中注释的单例模式取消注释，再新建两个类，InventoryManager和InventoryItem，Hierarchy面板新建grid（grid上添加GridLayouGroup脚本）用来存放物品，和item物体（item物体添加InventoryItem脚本）用来存放物品信息，get按钮添加点击事件，InventoryManager拖到GameManager游戏物体上具体如下图： InventoryItem脚本如下： using System.Collections.Generic; using UnityEngine; using UnityEngine.UI; public class InventoryItem : MonoBehaviour { //UI相关 public Text name; public Text des; public Text talent; public void UpdateInfo(string name,string des,string talent) { this.name.text = name; this.des.text = des; this.talent.text = talent; } } InventoryManager脚本如下： using System.Collections; using System.Collections.Generic; using UnityEngine; using UnityEngine.UI; public class InventoryManager : MonoBehaviour { //网格游戏物体 public GameObject grid; //prefab public GameObject inventoryItemPrefab; //获取list中所有物品 private List&lt;Inventory&gt; list; public void OnClickLoadInventory() { list = InventoryInfoLoadManager._instance.list; foreach (Inventory inventory in list) { inventoryItemPrefab.GetComponent&lt;InventoryItem&gt;().UpdateInfo(inventory.Name,inventory.Des,inventory.Talent); GameObject iip = GameObject.Instantiate(inventoryItemPrefab) as GameObject; iip.transform.parent = grid.transform; } } } Inspector面板如下图： 最终结果图： 写完了，好艰难。。","tags":[{"name":"Unity3D","slug":"Unity3D","permalink":"http://KaiXinChenYu.github.io/tags/Unity3D/"}]},{"title":"技术之路从此开始","date":"2017-04-10T11:05:00.000Z","path":"2017/04/10/20170410-Diary-Beginning/","text":"第一次写博客，写的随意了一点，主要讲下我的经历，和今后的目标。 不知不觉从大四的时候接触java，认识到什么是真正的编程，到现在已经2年多了，而我依然还是在技术门外徘徊。本科化工自动化毕业后选择考研，然后调剂到造纸专业，当时不懂，总觉得研究生总是比本科要好吧。然后刚进去的一年真的是煎熬，什么都不懂，一切从头做起。而在这样的一个环境下，我却偏执的想做一个程序员，当第一个“Hello World”显示在屏幕上时，当第一个APK在自己手上诞生时，当第一个网站发布出来时，当第一个游戏应用在自己手上玩起来时等等，一切的一切充满了成就感，哪怕只能自己一个人分享。不可自拔的喜欢上这个二进制的世界，这个能创造一切的世界，不起眼的你，也许正用代码操控着一个世界。 不知道是不是对现实的逃避，我非常不喜欢的现在的专业，不说有没有前途，虽然造纸确实差点，但是个人感觉专业到一定的程度，每个行业都是有发展的。就说我的专业，研究生基本都是做实验，做实验肯定要化学药品，各种有毒。所以我学的可以说很不认真，大部分的时间我都用来自学一些软件，包括平面设计，三维建模和游戏制作等，也一直看编程相关的书，现在可能比较熟悉C#吧。我不知道这样做对不对，但是我的目标很明确，保证毕业的情况下，自学我喜欢的，哪怕毕业后两边都没学好，也不后悔，相信每个人心中都有一个梦想，我也有个————想开发一个完全由我原创的游戏（这其中艰难程度不多说）。 这个博客是因为加了一个群，群主提到了用hexo和github搭建博客网站，然后提到了stormzhang这个行业内高手。之后我去加了AndroidDeveloper这个微信公众号，看了stormzhang的一些文章，才发现自己与外界交流太少了，只靠自己看视频看书自学肯定不够，我在程序的门外徘徊太久了。不知道为什么，感觉这两天收获真的很大。也因为以上的原因，我决定申请个github账号，并且做一个属于自己的博客。我前段时间也买过虚拟空间和域名，并且用.net写过一个个人网站（很简陋，没啥功能，还借用了别人模板），发布到网上，有时间我还是想把博客和自己的个人网站充实起来。 定了个一年内的目标：第一，每周尽可能做三期视频，主要关于PS，AE，Unity3D的，可能算是教程？或者自己的学习之路吧。视频暂时只放到个人网站，之后看做的好再想要不要发布。第二，每天尽可能发一个博客，哪怕只是生活的琐事（尽量保证技术相关）。第三，把游戏制作，真正提上日程吧，总是三天打鱼两天晒网，永远不可能制作出游戏，更别说成功的游戏艺术。最后，每天花点时间学学英语，背背单词，或者还有其他的，反正尽可能充实自己吧。 不知道我能不能坚持下去！！","tags":[{"name":"成长之路","slug":"成长之路","permalink":"http://KaiXinChenYu.github.io/tags/成长之路/"}]}]